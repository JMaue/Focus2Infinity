@page "/imagedetails"
@page "/imagedetails/{Topic}/{Name}"

@using System.Web
@using Focus2Infinity.Data
@inject F2IDataService f2iDataService

@if (!string.IsNullOrEmpty(_headline))
{
  <h3>@_headline</h3>
  <div class="row">
    <div class="col-12 col-sm-8">
      <img src="@ImgFile" alt="Image" style="max-width: 100%; max-height: 100vh; height: auto;" />
    </div>
    <div class="col-12 col-sm-4">
      <Cmp_TextCard Topic=@Topic Src=@Name Details="true"/>
    </div>
  </div>
}
else
{
  <p>No image file provided.</p>
}

@code {
  [Parameter]
  public string Topic { get; set; }
  [Parameter]
  public string Name { get; set; }

  private string ImgFile => @$"img/{Topic}/{Name}";

  private string _headline;

  protected override async Task OnInitializedAsync()
  {
    var src = await f2iDataService.GetStoryText(Topic, Name);
    _headline = src.GetHeadline();
  }
}
